[General]
# Обходная система. Если вы отключите эту опцию, это может вызвать
# некоторые системные проблемы, такие как задержка push-уведомлений
bypass-system = true

ipv6 = true
prefer-ipv6 = false

# Ответ по частному IP. Если эта опция не включена, разрешение доменного имени возвращает
# частный IP-адрес, а Shadowrocket посчитает доменное имя захваченным и принудительно использует прокси
private-ip-answer = true

# Доменное имя разрешается напрямую с использованием системного DNS; false означает, что не включено
dns-direct-system = false

# Использовать системный DNS после сбоя разрешения DNS; false означает, что не включено
dns-fallback-system = false

# Использовать прокси-сервер после сбоя разрешения доменного имени прямого подключения; false означает, что не включено
dns-direct-fallback-proxy = true

# Переопределение DNS. Переопределите системный DNS по умолчанию,
# используя обычный DNS или зашифрованный DNS (например, doh, doq, dot и т. д.).
# Некоторые DNS через https поддерживают http3, поэтому попробуйте выполнить запрос и переключиться
# на http3, если он поддерживается. Вы можете добавить #no-h3 после ссылки doh, чтобы закрыть ее.
# Используются Adguard DNS с блокировкой рекламы
dns-server = https://d.adguard-dns.com/dns-query/cdbb8ea1,tls://cdbb8ea1.d.adguard-dns.com,quic://cdbb8ea1.d.adguard-dns.com,2001:4860:4860::6464

# Альтернативный DNS. Возврат к резервному DNS при сбое разрешения перезаписанного DNS. Если вам нужно указать несколько DNS, их можно разделить запятыми. system означает возврат к системному DNS. Вы можете выбрать альтернативный DOH/DOT — https://github.com/curl/curl/wiki/DNS-over-HTTPS
fallback-dns-server = udp://8.8.8.8,tls://8.8.8.8,https://8.8.8.8/dns-query,udp://1.0.0.1,tls://1.1.1.1,2001:4860:4860::64

# Перезапись DNS. Некоторые устройства или программное обеспечение всегда
# используют жестко запрограммированные DNS-серверы, например Netflix отправляет
# запросы через Google DNS (8.8.8.8 или 8.8.4.4). Вы можете использовать эту опцию для перехвата запросов.
hijack-dns = :53

# Пропустить прокси. Эта опция заставляет диапазоны подключений для этих доменных
# имен или IP-адресов обрабатываться интерфейсом Shadowrocket TUN, а не прокси-сервером
# Shadowrocket. Эта опция используется для решения некоторых проблем совместимости с некоторыми приложениями.
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,captive.apple.com

# Маршрутизация обхода TUN. Интерфейс Shadowrocket TUN поддерживает только протокол TCP.
# Используйте эту опцию, чтобы обойти указанный диапазон IP-адресов,
# позволяя другим протоколам проходить через него.
#tun-excluded-routes = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32,239.255.255.250/32,17.0.0.0/8,2620:149:a44::/48,2403:300:a42::/48,2403:300:a51::/48,2a01:b740:a42::/48,31.173.34.209,85.26.231.145, 3.33.221.48/32,3.33.252.61/32,15.197.206.217/32,15.197.210.208/32,31.13.64.60/31,31.13.65.49/32,31.13.65.50/32,31.13.66.51/32,31.13.66.56/32,31.13.67.52/31,31.13.68.60/31,31.13.69.60/31,31.13.70.49/32,31.13.70.50/32,31.13.71.49/32,31.13.71.50/32,31.13.72.48/32,31.13.72.52/32,31.13.73.52/31,31.13.74.52/31,31.13.75.60/31,31.13.76.60/31,31.13.77.60/31,31.13.78.60/31,31.13.79.53/32,31.13.79.54/32,31.13.80.48/32,31.13.80.53/32,31.13.81.48/32,31.13.81.53/32,31.13.82.51/32,31.13.82.55/32,31.13.83.49/32,31.13.83.51/32,31.13.84.49/32,31.13.84.51/32,31.13.85.49/32,31.13.85.51/32,31.13.86.49/32,31.13.86.51/32,31.13.87.48/32,31.13.87.51/32,31.13.88.60/31,31.13.89.53/32,31.13.89.54/32,31.13.90.60/31,31.13.91.60/31,31.13.92.48/32,31.13.92.52/32,31.13.93.53/32,31.13.93.54/32,31.13.94.52/32,31.13.94.54/32,31.13.95.60/31,34.192.181.12/32,34.193.38.112/32,34.194.71.217/32,34.194.255.230/32,69.171.250.60/31,102.132.96.54/31,102.132.97.54/31,102.132.98.60/31,102.132.99.60/31,102.132.100.60/31,102.132.101.60/31,102.132.102.60/31,102.132.103.60/31,102.132.104.60/31,102.132.105.60/31,102.132.106.60/31,102.132.107.60/31,102.132.108.60/31,102.132.109.60/31,102.132.110.60/31,102.132.111.60/31,157.240.0.60/31,157.240.1.60/31,157.240.2.53/32,157.240.2.54/32,157.240.3.54/31,157.240.4.60/31,157.240.5.60/31,157.240.6.53/32,157.240.6.54/32,157.240.7.53/32,157.240.7.54/32,157.240.8.53/32,157.240.8.54/32,157.240.9.53/32,157.240.9.54/32,157.240.10.53/32,157.240.10.54/32,157.240.11.53/32,157.240.11.54/32,157.240.12.53/32,157.240.12.54/32,157.240.13.54/31,157.240.14.52/31,157.240.15.60/31,157.240.16.52/31,157.240.17.60/31,157.240.18.52/31,157.240.19.53/32,157.240.19.54/32,157.240.20.52/31,157.240.21.52/31,157.240.22.53/32,157.240.22.54/32,157.240.23.53/32,157.240.23.54/32,157.240.24.60/31,157.240.25.60/31,157.240.26.54/31,157.240.27.54/31,157.240.28.51/32,157.240.28.55/32,157.240.29.60/31,157.240.30.54/31,157.240.31.60/31,157.240.192.52/32,157.240.192.55/32,157.240.193.60/31,157.240.194.54/31,157.240.195.54/32,157.240.195.56/32,157.240.196.60/31,157.240.197.60/31,157.240.198.60/31,157.240.199.60/31,157.240.200.60/31,157.240.201.60/31,157.240.202.60/31,157.240.203.60/31,157.240.204.60/31,157.240.205.60/31,157.240.206.60/31,157.240.207.60/31,157.240.208.60/31,157.240.209.60/31,157.240.210.60/31,157.240.211.60/31,157.240.212.60/31,157.240.213.60/31,157.240.214.60/31,157.240.215.60/31,157.240.216.60/31,157.240.217.60/31,157.240.218.60/31,157.240.219.60/31,157.240.220.60/31,157.240.221.60/31,157.240.222.60/31,157.240.223.60/31,157.240.224.60/31,157.240.225.60/31,157.240.226.60/31,157.240.227.60/31,157.240.228.60/31,157.240.229.60/31,157.240.231.60/31,157.240.232.60/31,157.240.233.60/31,157.240.234.60/31,157.240.235.60/31,157.240.236.60/31,157.240.237.60/31,157.240.238.60/31,157.240.239.60/31,157.240.240.60/31,157.240.241.60/31,157.240.242.60/31,157.240.243.60/31,157.240.244.60/31,157.240.245.60/31,157.240.246.60/31,157.240.247.60/31,157.240.248.60/31,157.240.249.60/31,157.240.250.60/31,157.240.251.60/31,157.240.252.60/31,157.240.253.60/31,157.240.254.60/31,163.70.128.60/31,163.70.129.60/31,163.70.130.60/31,163.70.131.60/31,163.70.132.60/31,163.70.133.60/31,163.70.134.60/31,163.70.135.60/31,163.70.136.60/31,163.70.137.60/31,163.70.138.60/31,163.70.139.60/31,163.70.140.60/31,163.70.141.60/31,163.70.142.60/31,163.70.143.60/31,163.70.144.60/31,163.70.145.60/31,163.70.146.60/31,163.70.147.60/31,163.70.148.60/31,163.70.149.60/31,163.70.150.60/31,163.70.151.60/31,163.70.152.60/31,163.70.153.60/31,163.70.154.60/31,163.70.155.60/31,163.70.156.60/31,163.70.157.60/31,163.70.158.60/31,163.70.159.60/31,179.60.192.49/32,179.60.192.51/32,179.60.193.60/31,179.60.194.53/32,179.60.194.54/32,179.60.195.49/32,179.60.195.51/32,185.60.216.53/32,185.60.216.54/32,185.60.217.53/32,185.60.217.54/32,185.60.218.53/32,185.60.218.54/32,185.60.219.60/31

# TUN содержит маршруты. По умолчанию интерфейс Shadowrocket объявляет себя маршрутом
# по умолчанию, но из-за меньшей маршрутизации интерфейса Wi-Fi некоторый трафик может
# не проходить через интерфейс Shadowrocket. Используйте эту опцию, чтобы добавить меньшую таблицу маршрутизации.
tun-included-routes = 
# Всегда используйте реальный IP-адрес, эта опция требует, чтобы Shadowrocket
# обрабатывал DNS-запросы в TUN и возвращал реальный IP-адрес вместо поддельного IP-адреса.
always-real-ip = time.*.com,ntp.*.com,*.cloudflareclient.com,*.apple.com

# Пакеты Ping автоматически отвечают
icmp-auto-reply = true

# Если политика REJECT не включена, по умолчанию она вступит в силу
# только в режиме конфигурации. После включения политика может стать эффективной в других режимах глобальной маршрутизации.
always-reject-url-rewrite = false

# Если трафик UDP соответствует политике узла, которая не поддерживает
# пересылку UDP в правилах, повторно выберите резервное поведение. Дополнительные варианты поведения включают DIRECT и REJECT. DIRECT означает прямую пересылку UDP-трафика, а REJECT означает отказ от пересылки UDP-трафика.
udp-policy-not-supported-behaviour = REJECT

# Содержит конфигурацию. Например, `include=a.conf` означает, что текущая
# конфигурация содержит содержимое другой конфигурации a.conf, и текущая конфигурация имеет
# более высокий приоритет, чем a.conf. Эта опция предназначена для установления связи
# включения между конфигурациями для удовлетворения потребностей одновременного использования нескольких конфигураций.
include = sr_ru_public_lists.conf

# URL-адрес обновления файла конфигурации
update-url = https://raw.githubusercontent.com/Kerlios/bucket/master/conf/sr_ru_extended.conf





[Proxy Group]
AUTO = url-test,interval=600,timeout=5,url=https://cp.cloudflare.com/generate_204,policy-regex-filter=*

# Опционально. Добавьте эти адреса в настройках программы Settings → GeoLite2 Database
# Если у вас нет аккаунта на Maxmind и вы испольузуете финальное правило Proxy или Auto
# country: https://git.io/GeoLite2-Country.mmdb
# asn: https://github.com/P3TERX/GeoLite.mmdb/raw/download/GeoLite2-ASN.mmdb

# Выборочные правила маршрутизации






[Rule]
RULE-SET,https://raw.githubusercontent.com/Kerlios/bucket/master/lists/direct.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/Kerlios/bucket/master/lists/test.list,PROXY
DOMAIN-SUFFIX,udemy.com,PROXY
DOMAIN-SUFFIX,forumdaily.com,PROXY
DOMAIN-SUFFIX,jkcoxson.com,JITSTREAMER-EB
DOMAIN-SET,https://raw.githubusercontent.com/HybridNetworks/whatsapp-cidr/main/WhatsApp/whatsapp_domainlist.txt,DIRECT
RULE-SET,https://raw.githubusercontent.com/HybridNetworks/whatsapp-cidr/main/WhatsApp/whatsapp_cidr_ipv4.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Telegram/Telegram.list,DIRECT
DOMAIN-SUFFIX,dfsystems.ru,WORK-VPN
DOMAIN-SUFFIX,foxit.com,PROXY
